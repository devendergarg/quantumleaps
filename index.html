<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Leaps - Science Apps</title>
    <style>
        :root {
            --bg-color: #f4f7f9;
            --header-color: #2c3e50;
            --text-color: #34495e;
            --accent-color: #3498db;
            --card-bg: #ffffff;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --card-hover-shadow: 0 6px 12px rgba(0,0,0,0.15);
            --border-color: #e0e0e0;
            --subtle-text-color: #7f8c8d;
            --nav-bg: #ffffff;
            --button-hover-bg: #f0f0f0;
            --skeleton-bg: #e0e4e8;
            --skeleton-shimmer: #f4f7f9;
        }

        html.dark-mode {
            --bg-color: #1a202c;
            --header-color: #e2e8f0;
            --text-color: #a0aec0;
            --accent-color: #4299e1;
            --card-bg: #2d3748;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.3);
            --card-hover-shadow: 0 6px 12px rgba(0,0,0,0.4);
            --border-color: #4a5568;
            --subtle-text-color: #718096;
            --nav-bg: #2d3748;
            --button-hover-bg: #4a5568;
            --skeleton-bg: #2d3748;
            --skeleton-shimmer: #4a5568;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        #theme-toggle {
            position: absolute; top: 25px; right: 25px; background: none; border: none; cursor: pointer; padding: 5px; border-radius: 50%; color: var(--text-color); display: flex; align-items: center; justify-content: center;
        }
        #theme-toggle:hover { background-color: var(--button-hover-bg); }
        #theme-toggle svg { width: 24px; height: 24px; }

        #home-screen { max-width: 900px; margin: 0 auto; padding: 20px; text-align: center; position: relative; }
        #home-screen header h1 { font-size: 3em; color: var(--header-color); margin-bottom: 0; transition: color 0.3s ease; }
        #home-screen .subtitle { font-size: 1.2em; margin-top: 5px; color: var(--subtle-text-color); transition: color 0.3s ease; }
        .welcome-message { margin: 40px 0; }
        #app-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; justify-content: center; }
        
        .app-card {
            background-color: var(--card-bg); border-radius: 8px; padding: 20px; box-shadow: var(--card-shadow); cursor: pointer; text-align: center; font-size: 1.2em; font-weight: 500; border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; min-height: 120px; word-break: break-word; 
            
            /* MODIFIED: Add animation properties */
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease, transform 0.4s ease, box-shadow 0.2s ease, background-color 0.3s ease, color 0.3s ease;
        }
        
        /* NEW: Class to trigger the animation */
        .app-card.loaded {
            opacity: 1;
            transform: translateY(0);
        }

        .app-card:hover { transform: translateY(-5px); box-shadow: var(--card-hover-shadow); color: var(--accent-color); }
        
        .app-card:active {
            transform: translateY(-2px) scale(0.98);
            box-shadow: var(--card-shadow);
        }
        
        #home-screen footer { margin-top: 50px; padding-top: 20px; border-top: 1px solid var(--border-color); color: var(--subtle-text-color); transition: border-color 0.3s ease, color 0.3s ease; }

        #app-viewer { display: flex; flex-direction: column; height: 100vh; width: 100%; }
        .app-viewer-nav { display: flex; align-items: center; padding: 10px 20px; background-color: var(--nav-bg); box-shadow: 0 2px 5px rgba(0,0,0,0.1); flex-shrink: 0; transition: background-color 0.3s ease; }
        #appFrame { flex-grow: 1; border: none; }
        
        #breadcrumb-nav { list-style: none; margin: 0; padding: 0; display: flex; align-items: center; font-size: 1.1em; width: 100%; overflow: hidden; }
        #breadcrumb-nav li { display: inline-block; }
        #breadcrumb-nav li:first-child { flex-shrink: 0; }
        #breadcrumb-nav li:first-child a { white-space: nowrap; }
        #breadcrumb-nav .separator { margin: 0 0.6em; color: var(--subtle-text-color); flex-shrink: 0; }
        #breadcrumb-nav a { color: var(--accent-color); text-decoration: none; transition: text-decoration 0.2s ease; }
        #breadcrumb-nav a:hover { text-decoration: underline; }
        #breadcrumb-app-title { font-weight: bold; color: var(--header-color); flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-width: 0; }

        .hidden { display: none !important; }

        .skeleton-card {
            background-color: var(--skeleton-bg); border-radius: 8px; min-height: 120px;
            background-image: linear-gradient(90deg, var(--skeleton-bg) 25%, var(--skeleton-shimmer) 50%, var(--skeleton-bg) 75%);
            background-size: 200% 100%; animation: shimmer 1.5s infinite linear;
        }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }

        @media (max-width: 600px) {
            #theme-toggle { top: 15px; right: 15px; }
            #home-screen { padding: 15px; }
            #home-screen header h1 { font-size: 2.2em; }
            #app-list { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
            .app-card, .skeleton-card { min-height: auto; }
            .app-card { padding: 15px; font-size: 1.1em; justify-content: flex-start; text-align: left; }
        }
    </style>
</head>
<body>

    <div id="home-screen">
        <header>
            <h1>Quantum Leaps</h1>
            <p class="subtitle">A Collection of Interactive Science Applications</p>
            <button id="theme-toggle" title="Toggle theme">
                <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>
                <svg id="icon-moon" class="hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25c0 5.385 4.365 9.75 9.75 9.75 2.572 0 4.92-.99 6.752-2.648z" /></svg>
            </button>
        </header>
        <main>
            <div class="welcome-message">
                <h2>Welcome!</h2>
                <p>Explore the projects below. Click on any card to launch the application.</p>
            </div>
            <div id="app-list">
                <div class="skeleton-card"></div><div class="skeleton-card"></div><div class="skeleton-card"></div><div class="skeleton-card"></div><div class="skeleton-card"></div><div class="skeleton-card"></div>
            </div>
        </main>
        <footer>
            <p>Created by Dr. Devender Garg</p>
        </footer>
    </div>

    <div id="app-viewer" class="hidden">
        <nav class="app-viewer-nav">
            <ol id="breadcrumb-nav">
                <li><a href="#" id="breadcrumb-home-link">Quantum Leaps</a></li>
                <li class="separator">/</li>
                <li id="breadcrumb-app-title"></li>
            </ol>
        </nav>
        <iframe id="appFrame" title="App Content"></iframe>
    </div>

    <script>
        // CONFIGURATION
        const GITHUB_USERNAME = 'devendergarg'; 
        const GITHUB_REPO = 'quantumleaps';

        // --- Element References ---
        const homeScreen = document.getElementById('home-screen');
        const appViewer = document.getElementById('app-viewer');
        const appListContainer = document.getElementById('app-list');
        const appFrame = document.getElementById('appFrame');
        const breadcrumbHomeLink = document.getElementById('breadcrumb-home-link');
        const breadcrumbAppTitle = document.getElementById('breadcrumb-app-title');
        
        let availableApps = [];

        async function generateAppList() {
            const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/`;
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) { throw new Error(`GitHub API error: ${response.status}`); }
                const files = await response.json();
                
                appListContainer.innerHTML = '';
                
                const htmlFiles = files.filter(file => file.type === 'file' && file.name.endsWith('.html') && file.name !== 'index.html');

                if (htmlFiles.length === 0) {
                    appListContainer.innerHTML = '<p>No projects found in the repository.</p>';
                    return;
                }
                
                availableApps = [];
                // MODIFIED: Added index to forEach
                htmlFiles.forEach((file, index) => {
                    const fileName = file.name;
                    const displayName = fileName.replace('.html', '').replace(/[_-]/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                    
                    availableApps.push({ fileName, displayName });
                    
                    const appCard = document.createElement('div');
                    appCard.className = 'app-card';
                    appCard.textContent = displayName;
                    appCard.addEventListener('click', () => { window.location.hash = fileName; });
                    appListContainer.appendChild(appCard);

                    // NEW: Trigger the staggered animation
                    setTimeout(() => {
                        appCard.classList.add('loaded');
                    }, index * 50); // 50ms delay between each card

                });

            } catch (error) {
                console.error('Failed to fetch file list:', error);
                appListContainer.innerHTML = '<p>Error loading projects. Please check the console for details.</p>';
            }
        }
        
        function showApp(fileName, displayName) {
            appFrame.src = fileName;
            breadcrumbAppTitle.textContent = displayName;
            homeScreen.classList.add('hidden');
            appViewer.classList.remove('hidden');
        }

        function showHomeScreen() {
            appViewer.classList.add('hidden');
            homeScreen.classList.remove('hidden');
            appFrame.src = 'about:blank';
            breadcrumbAppTitle.textContent = '';
        }

        function handleRouteChange() {
            const appName = window.location.hash.substring(1); 
            const app = availableApps.find(app => app.fileName === appName);
            if (app) { showApp(app.fileName, app.displayName); } 
            else { showHomeScreen(); }
        }
        
        breadcrumbHomeLink.addEventListener('click', (event) => { event.preventDefault(); window.location.hash = ''; });
        window.addEventListener('hashchange', handleRouteChange);

        // --- Theme Toggle Logic ---
        const themeToggle = document.getElementById('theme-toggle');
        const sunIcon = document.getElementById('icon-sun');
        const moonIcon = document.getElementById('icon-moon');
        const root = document.documentElement;

        function applyTheme(theme) {
            if (theme === 'dark') {
                root.classList.add('dark-mode');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                root.classList.remove('dark-mode');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        }

        themeToggle.addEventListener('click', () => {
            const currentTheme = root.classList.contains('dark-mode') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        });

        // --- Initial Load Logic ---
        window.addEventListener('DOMContentLoaded', async () => {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (savedTheme) { applyTheme(savedTheme); } 
            else if (prefersDark) { applyTheme('dark'); }
            
            await generateAppList();
            handleRouteChange();
        });
    </script>

</body>
</html>